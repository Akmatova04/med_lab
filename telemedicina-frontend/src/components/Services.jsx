// src/components/Services.jsx (МОДАЛДЫК ТЕРЕЗЕ МЕНЕН ТОЛУКТАЛДЫ)

import React, { useState } from 'react'; // <-- 1. useState'ти импорт кылабыз
import './Services.css';

// ===== 2. КЫЗМАТТАРДЫН ТОЛУК СҮРӨТТӨМӨСҮ МЕНЕН МАССИВ ТҮЗӨБҮЗ =====
const serviceList = [
  // Сол колонка
  { 
    id: 1, 
    title: 'ГИНЕКОЛОГИЯ', 
    image: '/images/service-gynecology.png', 
    color: 'red', 
    description: `Забота о женском здоровье на всех этапах жизни: от планирования беременности и ведения до менопаузы.\n\nК нам можно обратиться онлайн, если вы хотите: спланировать беременность, обсудить вопросы контрацепции, нарушения менструального цикла, симптомы менопаузы, получить расшифровку анализов, рекомендации по интимному здоровью или поддержку во время беременности (не экстренные случаи).` 
  },
  { 
    id: 4, 
    title: 'ХИРУРГ-ФЛЕБОЛОГ', 
    image: '/images/service-neurology.png', 
    color: 'white', 
    description: `Хирургия:\nСпециализируется на лечении заболеваний, требующих оперативного вмешательства или оценки такой необходимости.\nК нам можно обратиться онлайн, если вам нужно: проконсультироваться по поводу послеоперационного восстановления, оценить состояние ран, швов (по фото/видео), получить рекомендации при небольших травмах, обсудить показания к плановым операциям или получить второе мнение.\n\nФлебология:\nДиагностирует и лечит заболевания вен, такие как варикоз, тромбофлебит, хроническая венозная недостаточность.\nК нам можно обратиться онлайн, если у вас: отеки, тяжесть в ногах, сосудистые звездочки, беспокоят вены, вы хотите получить рекомендации по профилактике заболеваний вен или проконсультироваться после операций на венах.`
  },
  { 
    id: 6, 
    title: 'КАРДИОЛОГИЯ', 
    image: '/images/service-cardiology.png', 
    color: 'red', 
    description: `Изучает сердце и кровеносные сосуды. Кардиолог помогает при проблемах с давлением, аритмиях, ишемической болезни сердца.\n\nК нам можно обратиться онлайн, если у вас: боли в груди (для первичной оценки), скачки давления, аритмии, для коррекции медикаментозной терапии, расшифровки ЭКГ или получения рекомендаций по здоровому образу жизни.`
  },
  
  // Ортодогу узун колонка
  { 
    id: 2, 
    title: 'ТЕРАПЕВТ', 
    image: '/images/service-oncology.png', 
    color: 'blue', 
    description: `Основа медицины, ваш первый контакт при любых недомоганиях. Терапевт диагностирует и лечит широкий спектр заболеваний, а также направляет к узким специалистам.\n\nК нам можно обратиться онлайн, если у вас: симптомы ОРВИ, простуды, гриппа, общая слабость, повышение температуры, недомогания, для расшифровки анализов, получения больничного листа или общих рекомендаций по здоровью.` 
  },
  
  // Оң колонка
  { 
    id: 3, 
    title: 'ГАСТРОЭНТЕРОЛОГИЯ', 
    image: '/images/service-homecare.png', 
    color: 'white', 
    description: 'Занимается диагностикой и лечением заболеваний желудка, кишечника, печени и поджелудочной железы\n\n\
Онлайн можно обратиться, если есть боли в животе, изжога, вздутие, расстройства пищеварения или вопросы по питанию и диете. ', // <-- Бул кызматка жаңы текст берилген жок
  },
  { 
    id: 5, 
    title: 'ОФТАЛЬМОЛОГИЯ', 
    image: '/images/service-stomatology.png', 
    color: 'dark-blue', 
    description: `Занимается здоровьем глаз и сохранением зрения. Офтальмолог помогает при различных заболеваниях глаз и нарушениях зрительной функции.\n\nК нам можно обратиться онлайн, если у вас:\n- вы были на очном приеме и хотите получить второе мнение\n- после приема у вас остались вопросы и сомнения\n- нужно понять, какие методы обследования необходимо выполнить для уточнения диагноза\n- прошли дообследование и хотите расшифровку результатов\n- нужно быстро оценить состояние и составить дальнейший план действий`
  },
  { 
    id: 7, 
    title: 'ДЕРМАТОЛОГИЯ-КОСМЕТОЛОГИЯ', 
    image: '/images/service-infectious.png', 
    color: 'white', 
    description: `Занимается здоровьем кожи, волос и ногтей, а также вопросами эстетики и ухода.\n\nК нам можно обратиться онлайн, если у вас: высыпания, покраснения, зуд (можно оценить по фото/видео), акне, родинки (первичная оценка), выпадение волос (первичная консультация), вопросы по уходу за кожей, подбору косметики или рекомендации по косметологическим процедурам.`
  },
];

// ===== 3. МОДАЛДЫК ТЕРЕЗЕ ҮЧҮН ЖАРДАМЧЫ КОМПОНЕНТ =====
const Modal = ({ title, onClose, children }) => (
  <div className="modal-overlay">
    <div className="modal-content">
      <h2>{title}</h2>
      <button onClick={onClose} className="modal-close-btn">&times;</button>
      <div className="modal-body">{children}</div>
    </div>
  </div>
);


const Services = () => {
  // ===== 4. МОДАЛДЫН АБАЛЫН БАШКАРУУ ҮЧҮН STATE КОШОБУЗ =====
  const [selectedService, setSelectedService] = useState(null);

  const handleOpenModal = (service) => {
    setSelectedService(service);
  };

  const handleCloseModal = () => {
    setSelectedService(null);
  };

  return (
    <> {/* Компонентти Fragment'ке ородук, себеби модалды кошушубуз керек */}
      <section className="services-section-final">
        <div className="container">
          <h2 className="section-title">УСЛУГИ КЛИНИКИ</h2>
          <p className="section-subtitle">
            В Telemedicina работают квалифицированные специалисты, которые стремятся
            предоставить каждому пациенту индивидуальный подход и заботу.
          </p>
          <div className="services-grid-final">
            {serviceList.map((service) => (
              <div key={service.id} className={`service-card-final service-id-${service.id} color-${service.color}`}>
                <div className="card-content-final">
                  <h3 className="service-title-final">{service.title}</h3>
                  
                  {/* ===== 5. "ПОДРОБНЕЕ" БАСКЫЧЫН ОҢДОЙБУЗ ===== */}
                  {/* Эми ал шилтеме эмес, модалды ачуучу баскыч */}
                  <button 
                    onClick={() => handleOpenModal(service)} 
                    className="btn-details-final"
                  >
                    Подробнее
                  </button>
                </div>
                <div className="card-image-box-final">
                  <img src={service.image} alt={service.title} className="service-image-final" />
                </div>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* ===== 6. МОДАЛДЫК ТЕРЕЗЕНИН ӨЗҮН ЧАКЫРАБЫЗ ===== */}
      {/* Бул терезе selectedService'те маалымат болгондо гана көрүнөт */}
      {selectedService && (
        <Modal title={selectedService.title} onClose={handleCloseModal}>
          <p>{selectedService.description}</p>
        </Modal>
      )}
    </>
  );
};

export default Services;